!function(t){function e(t,e,i){s("transform",t,"translate("+e+"px, "+i+"px)")}function i(t,e){s("transition",t,e)}function s(t,e,i){t=t.toLowerCase();for(var s=t.charAt(0).toUpperCase()+t.substr(1),o=["webkit","Moz","ms","O"],r=o.map(function(t){return t+s}).concat("transform"),n=0,a=r.length;a>n;++n)if(r[n]in e.style){if(void 0===i)return e.style[r[n]];e.style[r[n]]=i;break}}function o(e,i,s){return function(o,r,n){var a=[];return this.each(function(){var h=t(this).data(i);if("string"==typeof o){if("undefined"==typeof h)throw new Error(i+" not defined");switch(o){case"enable":h.enable();break;case"disable":h.disable();break;case"destroy":h.destroy(),t(this).removeData(i);break;case"option":void 0!==n?h.opts[r]=n:"object"==typeof r?h.opts=t.extend(h.opts,r):a.push(r?h.opts[r]:h.opts);break;case"toArray":if("sortable"!==i)return;a.push(h.toArray(r))}}else{if(h)return t.extend(h.opts,o),this;h=new e(t(this),t.extend({},s,o)),h.create(),t(this).data(i,h)}}),a.length?1===a.length?a[0]:a:this}}var r="mousedown touchstart MSPointerDown pointerdown",n="mouseup touchend MSPointerUp pointerup",a=0,h=function(){this.eventHandler=t("<div />"),this.parent=this.el=null,this.origin={x:0,y:0,transition:null,translate:null,offset:{x:0,y:0}},this.lastEntered=this.currentTarget=null,this.lastX=this.lastY=this.lastDirection=null;var e;Object.defineProperty(this,"placeholder",{get:function(){return e},set:function(t){e!==t&&(e&&e.remove(),e=t)}})};h.prototype.on=function(){return this.eventHandler.on.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},h.prototype.off=function(){return this.eventHandler.off.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},h.prototype.start=function(e,o,r){this.parent=e,this.el=o,this.el.css("-ms-touch-action","none").css("touch-action","none"),this.origin.x=r.changedTouches?r.changedTouches[0].pageX:r.pageX,this.origin.y=r.changedTouches?r.changedTouches[0].pageY:r.pageY,this.origin.transform=s("transform",this.el[0]),this.origin.transition=s("transition",this.el[0]);var n=this.el[0].getBoundingClientRect();return this.origin.offset.x=n.left-this.origin.x,this.origin.offset.y=n.top-this.origin.y,this.el[0].style.pointerEvents="none",t(document).on("mousemove touchmove MSPointerMove pointermove",t.proxy(this.move,this)),i(this.el[0],""),this.eventHandler.trigger("dragging:start"),this.el},h.prototype.stop=function(e,o){if(this.last){var r=this.last;this.last=null,t(r).trigger("dragging:drop",e)}this.el&&(void 0===o&&(o=!0),o&&(i(this.el[0],"all 0.5s ease-in-out 0s"),setTimeout(s.bind(null,"transition",this.el[0],this.origin.transition),500)),s("transform",this.el[0],this.origin.transform||"translate(0, 0)"),this.el[0].style.pointerEvents="auto",t(document).off("mousemove touchmove MSPointerMove pointermove",this.move),this.eventHandler.trigger("dragging:stop"),this.parent=this.el=this.placeholder=null)},h.prototype.move=function(i){if(this.el){var s=i.clientX||i.touches[0].clientX,o=i.clientY||i.touches[0].clientY,r=document.elementFromPoint(s,o),n=this.lastX-s,a=this.lastY-o,h=Math.abs(n)>Math.abs(a)&&n>0&&"left"||Math.abs(n)>Math.abs(a)&&0>n&&"right"||Math.abs(a)>Math.abs(n)&&a>0&&"up"||"down";r!==this.last&&t(r).trigger("dragging:identify")&&this.lastEntered!==this.currentTarget?(t(this.currentTarget).trigger("dragging:enter"),t(this.lastEntered).trigger("dragging:leave"),this.lastEntered=this.currentTarget):h!==this.lastDirection&&(this.currentTarget||t(r).trigger("dragging:identify"),t(this.currentTarget).trigger("dragging:diverted")),this.last=r,this.currentTarget=null,this.lastDirection=h,this.lastX=s,this.lastY=o,n=(i.changedTouches?i.changedTouches[0].pageX:i.pageX)-this.origin.x,a=(i.changedTouches?i.changedTouches[0].pageY:i.pageY)-this.origin.y,e(this.el[0],n,a)}},h.prototype.setCurrent=function(t){this.currentTarget=t};var l=t.dragging=parent.$.dragging||new h,p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,c=function(e,i,s,o){function r(e,s){Array.prototype.slice.call(e).forEach(function(e){a&&n.target[0]!==t(e).parent()[0]||(t(e).is(h)&&s.call(e),a||t(i,e).each(function(){s.call(this)}))})}var n=this;this.target=e;var a=">"===i[0],h=a?i.substr(1):i;this.observer=new p(function(t){n.disconnect(),t.forEach(function(t){s&&r(t.addedNodes,s),o&&r(t.removedNodes,o)}),n.observe()}),t(i,e).each(function(){s.call(this)}),this.observe()};c.prototype.disconnect=function(){this.observer.disconnect()},c.prototype.observe=function(){this.observer.observe(this.target[0],{childList:!0,subtree:!0})};var d=function(e,i){this.id=a++,this.el=t(e),this.opts=i,this.cancel=i.handle!==!1,this.connectedWith=[],this.opts.connectWith&&this.connectWith(this.opts.connectWith)};d.prototype.connectWith=function(e){var i=this;t(e).each(function(){var e=t(this);if(e[0]!==i.el[0]){var s=e.data("sortable")||e.data("droppable");s?s.connectedWith.push(i.id):e.one("sortable:create droppable:create",function(t,e){e.connectedWith.push(i.id)})}})},d.prototype.create=function(){this.el.on(r,t.proxy(this.start,this));var e=this;setTimeout(function(){e.el.trigger("draggable:create",e)})},d.prototype.destroy=function(){this.el.off(r,this.start)},d.prototype.enable=function(){this.opts.disabled=!1},d.prototype.disable=function(){this.opts.disabled=!0},d.prototype.start=function(e){if(this.opts.disabled)return!1;var i;if(e=e.originalEvent||e,e.preventDefault(),this.opts.cancel)for(i=t(e.target);i[0]!==this.el[0];){if(i.is(this.opts.cancel))return!1;i=i.parent()}if(this.opts.handle){for(i=t(e.target),isHandle=!1;i[0]!==this.el[0];){if(i.is(this.opts.handle)){isHandle=!0;break}i=i.parent()}if(!isHandle)return!1}l.start(this,this.el,e),t(document).on(n,t.proxy(this.end,this))},d.prototype.end=function(e){t(document).off(n,this.end),l.stop(e)};var g=function(e,i){this.id=a++,this.el=t(e),this.opts=i,this.accept=!1,this.connectedWith=[]};g.prototype.create=function(){this.el.on("dragging:enter",t.proxy(this.enter,this)).on("dragging:leave",t.proxy(this.leave,this)).on("dragging:drop",t.proxy(this.drop,this)),l.on("dragging:start",t.proxy(this.activate,this)).on("dragging:stop",t.proxy(this.reset,this));var e=this;setTimeout(function(){e.el.trigger("droppable:create",e)})},g.prototype.destroy=function(){this.el.off("dragging:enter",this.enter).off("dragging:leave",this.leave).off("dragging:drop",this.drop)},g.prototype.enable=function(){this.opts.disabled=!1},g.prototype.disable=function(){this.opts.disabled=!0},g.prototype.activate=function(){if(this.accept=-1!==this.connectedWith.indexOf(l.parent.id),!this.accept){var t="*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],l.el):l.el.is(this.opts.accept));"default"!==this.opts.scope?(this.accept=l.parent.opts.scope===this.opts.scope,this.accept||"*"===this.opts.accept||(this.accept=t)):this.accept=t}this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),this.el.trigger("droppable:activate",{item:l.el}))},g.prototype.reset=function(){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),this.opts.hoverClass&&this.el.removeClass(this.opts.hoverClass),this.el.trigger("droppable:deactivate",{item:l.el}))},g.prototype.enter=function(t){return this.opts.disabled?!1:(t.stopPropagation(),l.placeholder&&l.placeholder.hide(),void(this.accept&&(this.opts.hoverClass&&this.el.addClass(this.opts.hoverClass),this.el.trigger("droppable:over",{item:l.el}))))},g.prototype.leave=function(){return this.opts.disabled?!1:(this.opts.hoverClass&&this.accept&&this.el.removeClass(this.opts.hoverClass),void this.el.trigger("droppable:out",{item:l.el}))},g.prototype.drop=function(e,i){if(this.opts.disabled||!this.accept)return!1;if(l.el){var s,o=l.el;l.stop(i,!1),t(this.el).append(s=o.clone()),this.el.trigger("droppable:drop",{item:s,draggable:o})}};var f=function(e,i){this.id=a++,this.el=e,this.opts=i;var s;try{s=this.el.find(this.opts.items)[0].tagName}catch(o){s=/^ul|ol$/i.test(this.el.tagName)?"li":"div"}this.placeholder=t("<"+s+' class="'+this.opts.placeholder+'" />'),this.accept=this.index=this.direction=null,this.connectedWith=[],this.opts.connectWith&&this.connectWith(this.opts.connectWith)};f.prototype.connectWith=d.prototype.connectWith,f.prototype.create=function(){this.el.on(r,this.opts.items,t.proxy(this.start,this)).on("dragging:identify",this.opts.items,t.proxy(this.identify,this)).on("dragging:enter",this.opts.items,t.proxy(this.enter,this)).on("dragging:diverted",this.opts.items,t.proxy(this.diverted,this)).on("dragging:drop",this.opts.items,t.proxy(this.drop,this)),this.el.on("dragging:identify",t.proxy(this.identify,this)).on("dragging:enter",t.proxy(this.enter,this)).on("dragging:diverted",t.proxy(this.diverted,this)).on("dragging:drop",t.proxy(this.drop,this)),l.on("dragging:start",t.proxy(this.activate,this)).on("dragging:stop",t.proxy(this.reset,this));var e=this;setTimeout(function(){e.el.trigger("sortable:create",e)}),this.observer=new c(this.el,this.opts.items,function(){},function(){if(!(this===e.placeholder[0]||l.el&&this===l.el[0])){var i=t(this);e.el.trigger("sortable:change",{item:i}),e.el.trigger("sortable:update",{item:i,index:-1})}})},f.prototype.destroy=function(){this.el.off(r,this.opts.items,this.start).off("dragging:identify",this.opts.items,this.identify).off("dragging:enter",this.opts.items,this.enter).off("dragging:diverted",this.opts.items,this.diverted).off("dragging:drop",this.opts.items,this.drop),this.el.off("dragging:identify",this.identify).off("dragging:enter",this.enter).off("dragging:diverted",this.diverted).off("dragging:drop",this.drop),this.observer.disconnect()},f.prototype.enable=function(){this.opts.disabled=!1},f.prototype.disable=function(){this.opts.disabled=!0},f.prototype.activate=function(){this.accept=l.parent.id===this.id||!!~this.connectedWith.indexOf(l.parent.id),this.isEmpty=0===this.el.find(this.opts.items).length,this.accept&&(this.accept=l.parent.id===this.id||"*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],l.el):l.el.is(this.opts.accept)),this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),this.el.trigger("sortable:activate",l.el)))},f.prototype.reset=function(){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),this.el.trigger("sortable:deactivate",l.el))},f.prototype.start=function(e){if(!this.opts.disabled){var i;if(this.opts.cancel)for(i=t(e.target);i[0]!==this.el[0];){if(i.is(this.opts.cancel))return;i=i.parent()}if(this.opts.handle){for(i=t(e.target),isHandle=!1;i[0]!==this.el[0];){if(i.is(this.opts.handle)){isHandle=!0;break}i=i.parent()}if(!isHandle)return}e.stopPropagation(),e.preventDefault(),l.start(this,t(e.currentTarget),e),t(document).on(n,t.proxy(this.end,this)),this.index=l.el.index(),this.opts.forcePlaceholderSize&&(this.placeholder.height(l.el.height()),this.placeholder.width(l.el.width())),this.el.trigger("sortable:start",{item:l.el})}},f.prototype.identify=function(t){l.currentTarget||l.setCurrent(t.currentTarget)},f.prototype.enter=function(i){if(this.accept&&!this.opts.disabled){i.stopPropagation();var s=i.currentTarget,o=s===this.el[0];if(s!==this.placeholder[0]&&(s=t(s),!o||this.isEmpty||!this.placeholder.parent().length)){this.opts.forcePlaceholderSize&&this.placeholder.height(l.el.height());var r=!0;if(this.placeholder.parent().length||(r=!1,this.el.append(l.placeholder=this.placeholder),null!==this.index&&this.el.append(l.el)),o)this.el.append(this.placeholder);else{this.direction=this.placeholder.show().index()<s.index()?"down":"up",s["down"===this.direction?"after":"before"](this.placeholder),e(l.el[0],0,0);var n=l.el[0].getBoundingClientRect();l.origin.x=n.left-l.origin.offset.x,l.origin.y=n.top-l.origin.offset.y;var a=i.pageX-l.origin.x,h=i.pageY-l.origin.y;e(l.el[0],a,h)}r&&this.el.trigger("sortable:change",{item:l.el})}}},f.prototype.diverted=function(i){i.stopPropagation();var s=t(i.currentTarget),o=s[0]===this.el[0];if(!o){this.direction=this.placeholder.show().index()<s.index()?"down":"up",s["down"===this.direction?"after":"before"](this.placeholder),e(l.el[0],0,0);var r=l.el[0].getBoundingClientRect();l.origin.x=r.left-l.origin.offset.x,l.origin.y=r.top-l.origin.offset.y;var n=i.pageX-l.origin.x,a=i.pageY-l.origin.y;e(l.el[0],n,a)}},f.prototype.end=function(e){e.stopPropagation(),e.preventDefault(),l.el&&(this.el.trigger("sortable:beforeStop",{item:l.el}),l.el.insertBefore(this.el.find(this.opts.items).get(this.index)),t(document).off(n,this.end),l.stop(e),this.el.trigger("dragging:stop"),this.index=null)},f.prototype.drop=function(e,i){if(this.accept&&!this.opts.disabled&&(e.stopPropagation(),e.preventDefault(),l.el)){this.observer.disconnect(),l.el.insertBefore(this.placeholder).show(),l.placeholder=null;var s=l.el.index();null===this.index?(this.el.trigger("sortable:receive",{item:l.el}),this.el.trigger("sortable:update",{item:l.el,index:s})):s!==this.index&&this.el.trigger("sortable:update",{item:l.el,index:s}),this.el.trigger("sortable:beforeStop",{item:l.el}),l.parent instanceof f&&(l.parent.index=null,l.parent.el.trigger("dragging:stop")),t(document).off(n,this.end),l.stop(i,!1),this.el.trigger("dragging:stop"),this.observer.observe()}},f.prototype.toArray=function(e){e||(e={});var i=e.attribute||"id",s=[];return this.el.find(this.opts.items).each(function(){s.push(t(this).prop(i))}),s},t.fn.draggable=o(d,"draggable",{cancel:"input, textarea, button, select, option",connectWith:!1,cursor:"auto",disabled:!1,handle:!1,initialized:!1,scope:"default"}),t.fn.droppable=o(g,"droppable",{accept:"*",activeClass:!1,disabled:!1,hoverClass:!1,initialized:!1,scope:"default"}),t.fn.sortable=o(f,"sortable",{accept:"*",activeClass:!1,cancel:"input, textarea, button, select, option",connectWith:!1,disabled:!1,forcePlaceholderSize:!1,handle:!1,initialized:!1,items:"li, div",placeholder:"placeholder"})}(window.Zepto||window.jQuery);